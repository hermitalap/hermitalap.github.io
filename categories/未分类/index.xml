<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>æœªåˆ†ç±» - åˆ†ç±» - imzifeng</title>
        <link>http://imzifeng.cn/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/</link>
        <description>æœªåˆ†ç±» - åˆ†ç±» - imzifeng</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Fri, 13 Aug 2021 16:36:49 &#43;0800</lastBuildDate><atom:link href="http://imzifeng.cn/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/" rel="self" type="application/rss+xml" /><item>
    <title>RNA-seqåŸºç¡€-1-ç¯å¢ƒé…ç½®</title>
    <link>http://imzifeng.cn/posts/rnaseq-1/</link>
    <pubDate>Fri, 13 Aug 2021 16:36:49 &#43;0800</pubDate><author>
        <name>zifeng</name>
    </author><guid>http://imzifeng.cn/posts/rnaseq-1/</guid>
    <description><![CDATA[<p>Minicondaæ˜¯Anacondaçš„åŸºç¡€ç‰ˆï¼Œæä¾›ç¯å¢ƒç®¡ç†</p>
<h3 id="ä¸‹è½½">ä¸‹è½½</h3>
<p><a href="https://docs.conda.io/en/latest/miniconda.html" target="_blank" rel="noopener noreffer">Minicondaå®˜ç½‘</a>
ä½¿ç”¨æœ€æ–°åŒ…çš„åœ°å€ä¸‹è½½</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸‹è½½å®Œæˆï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">Miniconda3-latest-Linux-x86_64.sh
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å®‰è£…">å®‰è£…</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sh Miniconda3-latest-Linux-x86_64.sh
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">Welcome to Miniconda3 py39_4.10.3  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">In order to <span class="k">continue</span> the installation process, please review the license  
</span></span><span class="line"><span class="cl">agreement.  
</span></span><span class="line"><span class="cl">Please, press ENTER to <span class="k">continue</span>  
</span></span><span class="line"><span class="cl">&gt;&gt;&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>å›è½¦ç»§ç»­ï¼Œç„¶åæŒ‰ç©ºæ ¼ç›´æ¥è·³åˆ°æ–‡æ¡£åº•éƒ¨ï¼Œè¾“å…¥yeså¹¶å›è½¦</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Do you accept the license terms? <span class="o">[</span>yes<span class="p">|</span>no<span class="o">]</span>  
</span></span><span class="line"><span class="cl"><span class="o">[</span>no<span class="o">]</span> &gt;&gt;&gt;yes
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Miniconda3 will now be installed into this location:  
</span></span><span class="line"><span class="cl">/home/xxx/miniconda3  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">- Press ENTER to confirm the location  
</span></span><span class="line"><span class="cl">- Press CTRL-C to abort the installation  
</span></span><span class="line"><span class="cl">- Or specify a different location below  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="o">[</span>/home/xxx/miniconda3<span class="o">]</span> &gt;&gt;&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹åä¸€è·¯yeså›è½¦å³å¯</p>
<h3 id="æ·»åŠ å›½å†…æº">æ·»åŠ å›½å†…æº</h3>
<p>condaé»˜è®¤ä»å›½å¤–æœåŠ¡å™¨ä¸Šä¸‹è½½åŒ…ï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼Œå¯æ¢ä¸ºå›½å†…æº
<a href="https://mirror.tuna.tsinghua.edu.cn/help/anaconda/" target="_blank" rel="noopener noreffer">æ¸…åæº</a></p>
<h3 id="åˆ›å»ºæ–°ç¯å¢ƒ">åˆ›å»ºæ–°ç¯å¢ƒ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">conda create -n rnaseq <span class="nv">python</span><span class="o">==</span>3.7 -y
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•python3.7å¯¹å„ç§åŒ…çš„æ”¯æŒè¾ƒå¥½
å®Œæˆåï¼Œè¿›å…¥è¯¥ç¯å¢ƒ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ conda activate rnaseq
</span></span><span class="line"><span class="cl"><span class="o">(</span>rnaseq<span class="o">)</span> xxx@luo-lab-tower:~$
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‘½ä»¤æç¤ºç¬¦å‰çš„æ‹¬å·è¡¨ç¤ºå½“å‰çš„ç¯å¢ƒï¼Œåªæœ‰è¿›å…¥åˆ°è¯¥ç¯å¢ƒä¸­æ‰å¯ä»¥ä½¿ç”¨è¯¥ç¯å¢ƒä¸­çš„åŒ…ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªç¯å¢ƒï¼Œå¤šä¸ªç¯å¢ƒä¹‹é—´äº’ä¸å½±å“ã€‚</p>
<h3 id="å®‰è£…hisat2-stringtieåˆ†ææµç¨‹æ‰€éœ€çš„è½¯ä»¶åŒ…">å®‰è£…hisat2-stringtieåˆ†ææµç¨‹æ‰€éœ€çš„è½¯ä»¶åŒ…</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>rnaseq<span class="o">)</span> xxx@luo-lab-tower:~$ conda install fastqc -y
</span></span></code></pre></td></tr></table>
</div>
</div><p>fastqc ç”¨äºæ£€éªŒreadsè¯»æ•°è´¨é‡
ç”¨ç›¸åŒåŠæ³•ç»§ç»­å®‰è£…ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">hisat2
</span></span><span class="line"><span class="cl">samtools
</span></span><span class="line"><span class="cl">stringtie
</span></span><span class="line"><span class="cl">htseq-count
</span></span><span class="line"><span class="cl">tqdm
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‚ç…§è¯¥åšæ–‡<a href="https://blog.csdn.net/guguaihezi/article/details/81240916" target="_blank" rel="noopener noreffer">å®‰è£…sratoolkitæœ€æ–°ç‰ˆ</a>
å®˜æ–¹å®‰è£…åŒ…åœ°å€ï¼šhttps://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/
æœ€æ–°çš„åº”è¯¥æ˜¯2.11.0</p>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>æŠ€å·§<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">å®Œæˆä»¥ä¸Šåï¼Œè‡ªè¡Œgoogleäº†è§£è¿™äº›åŒ…çš„ä¸»è¦ç”¨é€”å’ŒåŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚</div>
        </div>
    </div>]]></description>
</item><item>
    <title>å…³äº</title>
    <link>http://imzifeng.cn/about/</link>
    <pubDate>Wed, 14 Jul 2021 20:44:53 &#43;0800</pubDate><author>
        <name>zifeng</name>
    </author><guid>http://imzifeng.cn/about/</guid>
    <description><![CDATA[<blockquote>
<p>æ— åçš„è‡ªç•™åœ°  Keep Alive.</p>
</blockquote>
<h2 id="-ä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªç ´ç«™">ğŸ  ä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªç ´ç«™</h2>
<ul>
<li>æƒ³å†™ä¸œè¥¿</li>
<li>æƒ³å†™çš„ä¸œè¥¿å®¹æ˜“è¢«å¤¹</li>
<li>æƒ³ç»™äººçœ‹åˆä¸æƒ³ç»™å¤ªå¤šäººçœ‹</li>
<li>æƒ³æœ‰ä¸ªéšæ—¶åœ¨çº¿ç”¨äºåˆ†äº«çš„ç¬”è®°æœ¬</li>
</ul>
<h2 id="-åšä¸»æ˜¯è°">ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°</h2>
<ul>
<li>é«˜å€¾å‘INTP-T(ä½Fe)</li>
<li>Pç¤¾ç”²çº§æˆ˜çŠ¯</li>
<li>å¤©å‘ä¸“ä¸šå—å®³è€…</li>
<li>å†…è€—è‡ªå—¨å‹é€‰æ‰‹</li>
<li>ä½ç”µå®¹â€œwarmest machineâ€</li>
<li>å‰äººç±»è§‚å¯Ÿè€…è”ç›Ÿæˆå‘˜</li>
</ul>
<h2 id="è¡¥å……è¯´æ˜">â­ï¸è¡¥å……è¯´æ˜</h2>
<p>è­¦å‘Šï¼æœ¬ç«™å¯èƒ½å«æœ‰ä»¥ä¸‹ä¸é€‚åˆæ‰€æœ‰å¹´é¾„æ®µç¾¤ä½“æŸ¥çœ‹çš„å†…å®¹:</p>
<ul>
<li>âš ï¸æ— ç—…å‘»åŸ</li>
<li>âš ï¸æ”¿æ²»æš´è®º</li>
<li>âš ï¸ç§æ—æ­§è§†</li>
<li>âš ï¸ç‰©ç§æ­§è§†</li>
<li>âš ï¸é€ƒäº¡ä¸»ä¹‰</li>
<li>âš ï¸å¼‚å¸¸æ¨¡å› </li>
<li>âš ï¸SCPæ±¡æŸ“</li>
</ul>
<p>å¦‚è¿˜æœªæ–½åŠ æ€æƒ³é’¢å°ï¼Œè¯·é…Œæƒ…æŸ¥çœ‹ã€‚</p>
<!-- more -->
<h2 id="æ”¿æ²»å±å®³å£°æ˜">âŒæ”¿æ²»å±å®³å£°æ˜</h2>
<p>å¦‚æœæ‚¨å±äºä»¥ä¸‹ä»»ä¸€ç¾¤ä½“ï¼Œè¯·ç«‹å³é€€å‡ºï¼š</p>
<ul>
<li>å¤çš®ç½—ä¸»ä¹‰è€…</li>
<li>éœæ™®è‡ªç”±ä¸»ä¹‰è€…</li>
<li>å…±æœ‰è¾¾å°”æ–‡ä¸»ä¹‰è€…</li>
<li>ç§‘ç»´è‹±ä¸»ä¹‰è€…</li>
<li>é“å¾·è¾¾å°”æ–‡ä¸»ä¹‰è€…</li>
<li>ååŠ¨çµé­‚ä¸»ä¹‰è€…</li>
<li>è™«ç¾¤æ„å¿—æ—ç¾¤</li>
</ul>
<p>ä½†æœ¬ç«™ä¸åŒ…å«å¯¹ä»»ä½•æ”¿æ²»æµæ´¾çš„è®¨è®ºæˆ–è¯„ä»·</p>
]]></description>
</item><item>
    <title>Electron Python</title>
    <link>http://imzifeng.cn/posts/electron-python/</link>
    <pubDate>Tue, 13 Jul 2021 21:55:18 &#43;0800</pubDate><author>
        <name>zifeng</name>
    </author><guid>http://imzifeng.cn/posts/electron-python/</guid>
    <description><![CDATA[<h2 id="é¡¹ç›®æœ€ç»ˆæ•ˆæœå±•ç¤º">é¡¹ç›®æœ€ç»ˆæ•ˆæœå±•ç¤º</h2>
<p></p>
<h2 id="æ¦‚è§ˆ">æ¦‚è§ˆ</h2>
<p>ä¸ºæ–¹ä¾¿ä½¿ç”¨å¼€æºé¡¹ç›®<a href="https://github.com/bytedance/piano_transcription" target="_blank" rel="noopener noreffer">piano_transcription</a>è€Œåˆ›å»ºï¼ŒåŸé¡¹ç›®å¯å°†é’¢ç´éŸ³é¢‘é€šè¿‡æœºå™¨å­¦ä¹ æ¨¡å‹è½¬åŒ–ä¸ºMIDIæ–‡ä»¶ä¹è°±(.mid)ï¼ŒåŸé¡¹ç›®æ¯æ¬¡æ“ä½œå‡éœ€è¦é€šè¿‡å‘½ä»¤è¡Œè¾“å…¥æ¬²è½¬æ¢çš„éŸ³é¢‘æ–‡ä»¶åœ°å€ï¼Œè¯¥GUIå¯å°†æ‰€æœ‰æ“ä½œä¸ºç®€å•çš„chlick&amp;dragã€‚</p>
<h2 id="ç»“æ„">ç»“æ„</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">start
</span></span><span class="line"><span class="cl"> |
</span></span><span class="line"><span class="cl"> V
</span></span><span class="line"><span class="cl">+--------------------+
</span></span><span class="line"><span class="cl">|                    | start
</span></span><span class="line"><span class="cl">|  electron          +-------------&gt; +------------------+
</span></span><span class="line"><span class="cl">|                    | sub process   |                  |
</span></span><span class="line"><span class="cl">| (browser or)       |               | python server    |
</span></span><span class="line"><span class="cl">|  desktop app       |               |                  |
</span></span><span class="line"><span class="cl">| (all html/css/js)  |               | (business logic) |
</span></span><span class="line"><span class="cl">|                    |    thrift     |                  |
</span></span><span class="line"><span class="cl">| (node.js runtime,  | &lt;-----------&gt; | (thrift server)  |
</span></span><span class="line"><span class="cl">|  thrift client)    | communication |                  |
</span></span><span class="line"><span class="cl">|                    |               |                  |
</span></span><span class="line"><span class="cl">+--------------------+               +------------------+
</span></span></code></pre></td></tr></table>
</div>
</div><p>electronè´Ÿè´£å‰å°ï¼Œä¸å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨main.jsä¸­åˆ›å»ºpythonå­çº¿ç¨‹ï¼Œpythonå­çº¿ç¨‹è¢«åˆ›å»ºåä½œä¸ºä¸€ä¸ªclientç›‘å¬è½¬æ¢ä»»åŠ¡ï¼Œå¹¶è°ƒç”¨ç›¸å…³çš„è½¬æ¢ä¸šåŠ¡ï¼ŒäºŒè€…é€šè¿‡<a href="https://github.com/apache/thrift" target="_blank" rel="noopener noreffer">Apache Thrift</a>è¿›è¡Œé€šä¿¡ã€‚</p>
<h2 id="è¿è¡Œæ•ˆæœ">è¿è¡Œæ•ˆæœ</h2>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<h2 id="mainjs">main.js</h2>
<p>main.jsä¸ºç¨‹åºå…¥å£å’Œä¸»çº¿ç¨‹ï¼Œè´Ÿè´£å»ºç«‹çª—å£å’Œå¤„ç†æ¥è‡ªæ¸²æŸ“çº¿ç¨‹çš„çª—å£æ“ä½œæ¶ˆæ¯ï¼Œä¸¤ä¸ªçº¿ç¨‹é€šè¿‡ipcè¿›è¡Œé€šä¿¡ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span><span class="nx">app</span><span class="p">,</span> <span class="nx">BrowserWindow</span><span class="p">,</span> <span class="nx">Notification</span><span class="p">,</span> <span class="nx">dialog</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Keep a global reference of the window object, if you don&#39;t, the window will
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// be closed automatically when the JavaScript object is garbage collected.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">win</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">createWindow</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆ›å»ºæµè§ˆå™¨çª—å£ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">win</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BrowserWindow</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">width</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">      <span class="nx">height</span><span class="o">:</span> <span class="mi">800</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">      <span class="nx">webPreferences</span><span class="o">:</span><span class="p">{</span><span class="nx">nodeIntegration</span><span class="o">:</span><span class="kc">true</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">transparent</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">frame</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">resizable</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// backgroundColor: &#39;#00000000&#39;,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ç„¶ååŠ è½½åº”ç”¨çš„ index.htmlã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">win</span><span class="p">.</span><span class="nx">loadFile</span><span class="p">(</span><span class="s1">&#39;new_index.html&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ‰“å¼€å¼€å‘è€…å·¥å…·
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// win.webContents.openDevTools()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å½“ window è¢«å…³é—­ï¼Œè¿™ä¸ªäº‹ä»¶ä¼šè¢«è§¦å‘ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">win</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;closed&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å–æ¶ˆå¼•ç”¨ window å¯¹è±¡ï¼Œå¦‚æœä½ çš„åº”ç”¨æ”¯æŒå¤šçª—å£çš„è¯ï¼Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// é€šå¸¸ä¼šæŠŠå¤šä¸ª window å¯¹è±¡å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢ï¼Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// ä¸æ­¤åŒæ—¶ï¼Œä½ åº”è¯¥åˆ é™¤ç›¸åº”çš„å…ƒç´ ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">win</span> <span class="o">=</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Electron ä¼šåœ¨åˆå§‹åŒ–åå¹¶å‡†å¤‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// éƒ¨åˆ† API åœ¨ ready äº‹ä»¶è§¦å‘åæ‰èƒ½ä½¿ç”¨ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;ready&#39;</span><span class="p">,</span> <span class="nx">createWindow</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// å½“å…¨éƒ¨çª—å£å…³é—­æ—¶é€€å‡ºã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;window-all-closed&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åœ¨ macOS ä¸Šï¼Œé™¤éç”¨æˆ·ç”¨ Cmd + Q ç¡®å®šåœ°é€€å‡ºï¼Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// å¦åˆ™ç»å¤§éƒ¨åˆ†åº”ç”¨åŠå…¶èœå•æ ä¼šä¿æŒæ¿€æ´»ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">platform</span> <span class="o">!==</span> <span class="s1">&#39;darwin&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">app</span><span class="p">.</span><span class="nx">quit</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åœ¨macOSä¸Šï¼Œå½“å•å‡»dockå›¾æ ‡å¹¶ä¸”æ²¡æœ‰å…¶ä»–çª—å£æ‰“å¼€æ—¶ï¼Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// é€šå¸¸åœ¨åº”ç”¨ç¨‹åºä¸­é‡æ–°åˆ›å»ºä¸€ä¸ªçª—å£ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">win</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">createWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯ä»¥ç»­å†™åº”ç”¨å‰©ä¸‹ä¸»è¿›ç¨‹ä»£ç ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// ä¹Ÿå¯ä»¥æ‹†åˆ†æˆå‡ ä¸ªæ–‡ä»¶ï¼Œç„¶åç”¨ require å¯¼å…¥ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span><span class="o">=</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">pyProc</span> <span class="o">=</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">pyPort</span> <span class="o">=</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">createPyProc</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// let port = &#39;4242&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">script</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;py&#39;</span><span class="p">,</span> <span class="s1">&#39;thrift_server.py&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pyProc</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;child_process&#39;</span><span class="p">).</span><span class="nx">spawn</span><span class="p">(</span><span class="s1">&#39;python&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">script</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// let script = path.join(__dirname, &#39;py&#39;, &#39;dist&#39;,&#39;thrift_server&#39;, &#39;thrift_server.exe&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// pyProc = require(&#39;child_process&#39;).execFile(script)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">pyProc</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;child process success&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">exitPyProc</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pyProc</span><span class="p">.</span><span class="nx">kill</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pyProc</span> <span class="o">=</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pyPort</span> <span class="o">=</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">ipcMain</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">).</span><span class="nx">ipcMain</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//æ¥æ”¶æœ€å°åŒ–å‘½ä»¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;window-min&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">win</span><span class="p">.</span><span class="nx">minimize</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="c1">//æ¥æ”¶æœ€å¤§åŒ–å‘½ä»¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;window-max&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">isMaximized</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">win</span><span class="p">.</span><span class="nx">restore</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">win</span><span class="p">.</span><span class="nx">maximize</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="c1">//æ¥æ”¶å…³é—­å‘½ä»¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;window-close&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">win</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//æ‹–åŠ¨ä¿å­˜æ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;ondragstart&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">filePath</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">event</span><span class="p">.</span><span class="nx">sender</span><span class="p">.</span><span class="nx">startDrag</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">file</span><span class="o">:</span> <span class="nx">filePath</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">icon</span><span class="o">:</span> <span class="s1">&#39;./icon.png&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//æ˜¾ç¤ºé€šçŸ¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">function</span> <span class="nx">showNotification</span> <span class="p">(){</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">notification</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Piano transcription E&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">body</span><span class="o">:</span> <span class="s1">&#39;è½¬æ¢ä»»åŠ¡å·²å®Œæˆ&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">new</span> <span class="nx">Notification</span><span class="p">(</span><span class="nx">notification</span><span class="p">).</span><span class="nx">show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;showNotification&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">showNotification</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//æ¥æ”¶æ‰“å¼€å¯¹è¯æ¡†äº‹ä»¶ï¼Œå®Œæˆåï¼Œå›ä¼ è·å–åˆ°çš„æ–‡ä»¶è·¯å¾„åˆ°æ¸²æŸ“çº¿ç¨‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;openDialog&#39;</span><span class="p">,(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">arg</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">dialog</span><span class="p">.</span><span class="nx">showOpenDialog</span><span class="p">({</span> <span class="nx">properties</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;openFile&#39;</span><span class="p">,</span> <span class="s1">&#39;multiSelections&#39;</span><span class="p">]</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span><span class="p">=&gt;{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">filePaths</span><span class="p">);</span>        <span class="c1">//è¾“å‡ºç»“æœ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">filePaths</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">event</span><span class="p">.</span><span class="nx">reply</span><span class="p">(</span><span class="s1">&#39;selectedItem&#39;</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">filePaths</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//è®¾ç½®åº”ç”¨å¯åŠ¨å…³é—­æ—¶è”åŠ¨pythonå­çº¿ç¨‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;ready&#39;</span><span class="p">,</span> <span class="nx">createPyProc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;will-quit&#39;</span><span class="p">,</span> <span class="nx">exitPyProc</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="renderjs">render.js</h2>
<p>renderçº¿ç¨‹ä½œä¸ºé¡µé¢é€»è¾‘å…ƒç´ è¢«åŠ è½½ï¼Œè´Ÿè´£å»ºç«‹thriftå­çº¿ç¨‹ï¼Œä¸å­çº¿ç¨‹é€šä¿¡ï¼Œå¹¶ç›¸åº”é¼ æ ‡ç‚¹å‡»äº‹ä»¶è½¬æ¢ä¸ºäº‹ä»¶ä¿¡æ¯ä¼ å…¥ä¸»çº¿ç¨‹ä»¥æ§åˆ¶æ¡Œé¢åº”ç”¨ä¸‹çš„çª—å£ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">// renderer.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">thrift</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;thrift&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// è°ƒç”¨win10ä¸‹thriftå‘½ä»¤è‡ªåŠ¨ç”Ÿæˆçš„ä¾èµ–åŒ…
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">TranscriptionService</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./gen-nodejs/TranscriptionService.js&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">ttypes</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./gen-nodejs/trans_types.js&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// thrift é€šä¿¡ä¼šå ç”¨ä¸€ä¸ªæœ¬åœ°ç«¯å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">thriftConnection</span> <span class="o">=</span> <span class="nx">thrift</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">8000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">thriftClient</span> <span class="o">=</span> <span class="nx">thrift</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">TranscriptionService</span><span class="p">,</span><span class="nx">thriftConnection</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//å»ºç«‹thriftå­çº¿ç¨‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">thriftConnection</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&#34;error&#34;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// let name = document.querySelector(&#39;#name&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1">// let result = document.querySelector(&#39;#result&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">ipcRenderer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">).</span><span class="nx">ipcRenderer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//å“åº”ç‚¹å‡»æœ€å¤§åŒ–æŒ‰é’®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">max</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">max</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//å‘é€æœ€å¤§åŒ–å‘½ä»¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;window-max&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//æœ€å¤§åŒ–å›¾å½¢åˆ‡æ¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nx">max</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;images/max.png&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">max</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="s1">&#39;images/maxed.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">max</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="s1">&#39;images/max.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//å“åº”ç‚¹å‡»æœ€å°åŒ–æŒ‰é’®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">min</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;min&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">min</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">min</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//å‘é€æœ€å°åŒ–å‘½ä»¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;window-min&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//å“åº”ç‚¹å‡»å…³é—­æŒ‰é’®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">close</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">close</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//å‘é€å…³é—­å‘½ä»¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;window-close&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//æ‹–åŠ¨ä¿å­˜æ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;drag_save&#39;</span><span class="p">).</span><span class="nx">ondragstart</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;ondragstart&#39;</span><span class="p">,</span> <span class="nx">dragTosavePath</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//å“åº”ç‚¹å‡»å¼€å§‹è½¬æ¢æŒ‰é’®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">dragTosavePath</span> <span class="o">=</span> <span class="s1">&#39;C:/Development/Projects/piano_transcription/output/test.mid&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">transcript</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;transcript&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">transcript</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">transcript</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// document.getElementById(&#34;progressDiv&#34;).innerHTML=&#39;&lt;div class=&#34;progress-bar progress-bar-striped progress-bar-animated bg-primary&#34; role=&#34;progressbar&#34; style=&#34;width: 100% ;height: 20px;&#34; aria-valuenow=&#34;25&#34; aria-valuemin=&#34;0&#34; aria-valuemax=&#34;100&#34;&gt;&lt;/div&gt;&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// document.getElementById(&#34;progressDiv&#34;).setAttribute(&#34;hidden&#34;,true);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;progressDiv&#34;</span><span class="p">).</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="s2">&#34;hidden&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;transcript&#34;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&#34;disabled&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;transcript&#34;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&#34;processing...&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="kd">var</span> <span class="nx">dic</span> <span class="o">=</span> <span class="p">{</span><span class="nx">paths</span><span class="o">:</span> <span class="nx">filePaths</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="nx">dic</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">dic</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nx">thriftClient</span><span class="p">.</span><span class="nx">music2mid</span><span class="p">(</span><span class="nx">dic</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">Swal</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="s2">&#34;å®Œæˆ!&#34;</span><span class="p">,</span> <span class="s2">&#34;æ‚¨çš„æ‰€æœ‰è½¬æ¢ä»»åŠ¡å·²å®Œæˆ!&#34;</span><span class="p">,</span> <span class="s2">&#34;success&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;showNotification&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;transcript&#34;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s2">&#34;disabled&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;transcript&#34;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&#34;start&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;progressDiv&#34;</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&#34;hidden&#34;</span><span class="p">,</span><span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;drag_save&#34;</span><span class="p">).</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="s2">&#34;hidden&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">midPaths</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">res</span><span class="p">)[</span><span class="s1">&#39;output_paths&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">dragTosavePath</span> <span class="o">=</span> <span class="nx">midPaths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">dragTosavePath</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//å“åº”ç‚¹å‡»ä»¥æ‰“å¼€æ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">function</span> <span class="nx">openDialog</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;openDialog&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;selectedItem&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">paths</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// console.log(&#39;render:&#39;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// console.log(paths);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fileNum</span> <span class="o">+=</span> <span class="nx">paths</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filePaths</span> <span class="o">=</span> <span class="nx">filePaths</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">paths</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">refreshFileNum</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">clickOpen</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;drag_open&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">clickOpen</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clickOpen</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">openDialog</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//æ‹–æ‹½æ‰“å¼€åŠŸèƒ½
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">dragWrapper</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;drag_open&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//æ·»åŠ æ‹–æ‹½äº‹ä»¶ç›‘å¬å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">dragWrapper</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;drop&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//é˜»æ­¢é»˜è®¤è¡Œä¸º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//è·å–æ–‡ä»¶åˆ—è¡¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">files</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">paths</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">file</span> <span class="k">of</span> <span class="nx">files</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//è·å–æ–‡ä»¶è·¯å¾„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">paths</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">path</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// console.log(paths);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fileNum</span> <span class="o">+=</span> <span class="nx">paths</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filePaths</span> <span class="o">=</span> <span class="nx">filePaths</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">paths</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">refreshFileNum</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//é˜»æ­¢æ‹–æ‹½ç»“æŸäº‹ä»¶é»˜è®¤è¡Œä¸º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">dragWrapper</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;dragover&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">fileNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">filePaths</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fileNumLabel</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;fileNumLabel&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fileList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;fileList&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">refreshFileNum</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fileNumLabel</span><span class="p">.</span><span class="nx">innerHTML</span><span class="o">=</span><span class="s1">&#39;å·²é€‰æ‹©&#39;</span><span class="o">+</span><span class="nx">fileNum</span><span class="o">+</span><span class="s1">&#39;ä¸ªæ–‡ä»¶&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fileList</span><span class="p">.</span><span class="nx">innerHTML</span><span class="o">=</span><span class="s1">&#39;&lt;span&gt;æ”¯æŒå¯¼å…¥å•ä¸ªæˆ–å¤šä¸ªéŸ³é¢‘æ–‡ä»¶&lt;/span&gt;&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">file</span> <span class="k">of</span> <span class="nx">filePaths</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span>  <span class="nx">file</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&#34;\\&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">fileSpan</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fileSpan</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fileList</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">fileSpan</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">clickOpen</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;check&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">clickOpen</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clickOpen</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;transcript&#34;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s2">&#34;disabled&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fileNum</span><span class="p">,</span> <span class="nx">filePaths</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="thriftpy">thrift.py</h2>
<p>thrift.pyè´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘éƒ¨åˆ†ï¼Œå¹¶åˆ›å»ºthriftæœåŠ¡ç«¯ï¼Œç›¸åº”è½¬æ¢æŒ‡ä»¤ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‰å°ä¼ å…¥çš„ä»…ä¸ºæ¬²è½¬æ¢éŸ³é¢‘æ–‡ä»¶çš„è·¯å¾„ï¼Œpythonå®Œæˆè½¬æ¢åä¼ å›ç”Ÿæˆçš„midæ–‡ä»¶è·¯å¾„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">thrift.transport</span> <span class="kn">import</span> <span class="n">TSocket</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">thrift.transport</span> <span class="kn">import</span> <span class="n">TTransport</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">thrift.protocol</span> <span class="kn">import</span> <span class="n">TBinaryProtocol</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">thrift.server</span> <span class="kn">import</span> <span class="n">TServer</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">gen_py.trans</span> <span class="kn">import</span> <span class="n">TranscriptionService</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">piano_transcription_inference</span> <span class="kn">import</span> <span class="n">PianoTranscription</span><span class="p">,</span> <span class="n">sample_rate</span><span class="p">,</span> <span class="n">load_audio</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">checkpoint_path</span> <span class="o">=</span> <span class="s1">&#39;py/piano_transcription_inference_data/note_F1=0.9677_pedal_F1=0.9186.pth&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Transcription</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">music2mid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dic</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">output_files_list</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">mp32mid</span><span class="p">(</span><span class="n">fp</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># Load audio</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="n">audio</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">load_audio</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sample_rate</span><span class="p">,</span> <span class="n">mono</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># Transcriptor</span>
</span></span><span class="line"><span class="cl">            <span class="n">transcriptor</span> <span class="o">=</span> <span class="n">PianoTranscription</span><span class="p">(</span><span class="n">device</span><span class="o">=</span><span class="s1">&#39;cuda&#39;</span><span class="p">,</span> <span class="n">checkpoint_path</span><span class="o">=</span><span class="n">checkpoint_path</span><span class="p">)</span>  <span class="c1"># &#39;cuda&#39; | &#39;cpu&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="n">fname</span><span class="o">=</span><span class="n">fp</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">fname</span><span class="o">+</span><span class="s1">&#39; is processing...&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># Transcribe and write out to MIDI file</span>
</span></span><span class="line"><span class="cl">            <span class="n">output_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">py</span><span class="se">\\</span><span class="s1">output</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">fname</span> <span class="o">+</span> <span class="s1">&#39;.mid&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="n">transcribed_dict</span> <span class="o">=</span> <span class="n">transcriptor</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">audio</span><span class="p">,</span> <span class="n">output_file</span><span class="p">)</span>  <span class="c1"># è®¾ç½®è¾“å‡ºè·¯å¾„ï¼ˆæ–‡ä»¶åï¼‰</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">output_file</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">dic</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">[</span><span class="s2">&#34;paths&#34;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">            <span class="n">output_files_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mp32mid</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&#34;output_paths&#34;</span><span class="p">:</span><span class="n">output_files_list</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">res</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">res</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">port</span> <span class="o">=</span> <span class="mi">8000</span>
</span></span><span class="line"><span class="cl">    <span class="n">ip</span> <span class="o">=</span> <span class="s2">&#34;127.0.0.1&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># åˆ›å»ºæœåŠ¡ç«¯</span>
</span></span><span class="line"><span class="cl">    <span class="n">handler</span> <span class="o">=</span> <span class="n">Transcription</span><span class="p">()</span>  <span class="c1"># è‡ªå®šä¹‰ç±»</span>
</span></span><span class="line"><span class="cl">    <span class="n">processor</span> <span class="o">=</span> <span class="n">TranscriptionService</span><span class="o">.</span><span class="n">Processor</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>  <span class="c1"># userServiceä¸ºpythonæ¥å£æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆ</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ç›‘å¬ç«¯å£</span>
</span></span><span class="line"><span class="cl">    <span class="n">transport</span> <span class="o">=</span> <span class="n">TSocket</span><span class="o">.</span><span class="n">TServerSocket</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>  <span class="c1"># ipä¸portä½ç½®ä¸å¯äº¤æ¢</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># é€‰æ‹©ä¼ è¾“å±‚</span>
</span></span><span class="line"><span class="cl">    <span class="n">tfactory</span> <span class="o">=</span> <span class="n">TTransport</span><span class="o">.</span><span class="n">TBufferedTransportFactory</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># é€‰æ‹©ä¼ è¾“åè®®</span>
</span></span><span class="line"><span class="cl">    <span class="n">pfactory</span> <span class="o">=</span> <span class="n">TBinaryProtocol</span><span class="o">.</span><span class="n">TBinaryProtocolFactory</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># åˆ›å»ºæœåŠ¡ç«¯</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span> <span class="o">=</span> <span class="n">TServer</span><span class="o">.</span><span class="n">TThreadedServer</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">tfactory</span><span class="p">,</span> <span class="n">pfactory</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;start server in python&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span><span class="o">.</span><span class="n">serve</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Done&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="thriftæ¥å£æ–‡ä»¶çš„ç”Ÿæˆ">thriftæ¥å£æ–‡ä»¶çš„ç”Ÿæˆ</h2>
<p>ç”±äºthriftæ¥å£è¿æ¥ä¸¤ç§è¯­è¨€ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ¥å£è¿›è¡Œå®šä¹‰</p>
<h2 id="transthrift">trans.thrift</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">service TranscriptionService {
</span></span><span class="line"><span class="cl">    string music2mid(1:string name)
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åä½¿ç”¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">thrift.exe -out ./gen_py -gen py  trans.thrift
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">./gen_py
</span></span></span><span class="line"><span class="cl"><span class="s1">â”‚__init__.py
</span></span></span><span class="line"><span class="cl"><span class="s1">â”‚
</span></span></span><span class="line"><span class="cl"><span class="s1">â””trans
</span></span></span><span class="line"><span class="cl"><span class="s1">   â”‚  constants.py
</span></span></span><span class="line"><span class="cl"><span class="s1">   â”‚  TranscriptionService-remote
</span></span></span><span class="line"><span class="cl"><span class="s1">   â”‚  TranscriptionService.py
</span></span></span><span class="line"><span class="cl"><span class="s1">   â”‚  ttypes.py
</span></span></span><span class="line"><span class="cl"><span class="s1">   â””  __init__.py
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">thrift.exe -out ./gen_nodejs --gen js:node  trans.thrift
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;</span><span class="err">&#39;</span>
</span></span><span class="line"><span class="cl">./gen_nodejs
</span></span><span class="line"><span class="cl">â”œâ”€TranscriptionService.js
</span></span><span class="line"><span class="cl">â””â”€trans_types.js
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”Ÿæˆå¯¹åº”è¯­è¨€çš„æ¥å£ç¨‹åºä¾›è°ƒç”¨
Pythonä¸­çš„è°ƒç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">from thrift.transport import TSocket
</span></span><span class="line"><span class="cl">from thrift.transport import TTransport
</span></span><span class="line"><span class="cl">from thrift.protocol import TBinaryProtocol
</span></span><span class="line"><span class="cl">from thrift.server import TServer
</span></span></code></pre></td></tr></table>
</div>
</div><p>Electron(node.js)ä¸­çš„è°ƒç”¨ï¼š
JavaScriptä¸­çš„è°ƒç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">thrift</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;thrift&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// è°ƒç”¨win10ä¸‹thriftå‘½ä»¤è‡ªåŠ¨ç”Ÿæˆçš„ä¾èµ–åŒ…
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">TranscriptionService</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./gen-nodejs/TranscriptionService.js&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">ttypes</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./gen-nodejs/trans_types.js&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// thrift é€šä¿¡ä¼šå ç”¨ä¸€ä¸ªæœ¬åœ°ç«¯å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">thriftConnection</span> <span class="o">=</span> <span class="nx">thrift</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">8000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">thriftClient</span> <span class="o">=</span> <span class="nx">thrift</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">TranscriptionService</span><span class="p">,</span><span class="nx">thriftConnection</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div>]]></description>
</item><item>
    <title>é’æµ·è¡Œ</title>
    <link>http://imzifeng.cn/posts/qinghai/</link>
    <pubDate>Tue, 13 Jul 2021 17:53:30 &#43;0800</pubDate><author>
        <name>zifeng</name>
    </author><guid>http://imzifeng.cn/posts/qinghai/</guid>
    <description><![CDATA[<h3 id="è·¯çº¿å›¾">è·¯çº¿å›¾</h3>
<div class="mermaid" id="id-1"></div>
<h3 id="ç¬¬ä¸€å¤©-717">ç¬¬ä¸€å¤© 7/17</h3>
<div class="mapbox" id="id-2" style="width: 100%; height: 20rem;"></div>
<p>ä¸‹åˆ2æ—¶é™è½ï¼Œä¹˜è½¦åˆ°å¸‚åŒºï¼Œå…¥ä½é…’åº—ï¼ˆï¼‰
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw"></i>å¿…è¦äº‹é¡¹<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>è”ç³»å¸æœºï¼Œè½¦è¾†</p>
<p>è´­ä¹°ç‰©èµ„ï¼šæ°´ï¼Œå¹²ç²®ã€å…¶ä»–é˜²æŠ¤å™¨å…·ã€é˜²æ™’ç­‰</p>
</div>
        </div>
    </div></p>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>å¯é€‰å¸‚å†…æ™¯ç‚¹<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>é¥®é£Ÿï¼šè«å®¶è¡—å’Œé¥®é©¬è¡—</p>
<p>å¤œæ™¯ï¼Œåœ°æ ‡å»ºç­‘ï¼šæµ¦å®ä¹‹ç </p>
</div>
        </div>
    </div>
<h3 id="ç¬¬äºŒå¤©-718">ç¬¬äºŒå¤© 7/18</h3>
<p>è¥¿å®å‡ºå‘ï¼Œå‰å¾€å¡”å°”å¯º
<div class="mapbox" id="id-3" style="width: 100%; height: 20rem;"></div>
æ‹‰è„Šå±±
<div class="mapbox" id="id-4" style="width: 100%; height: 20rem;"></div>
é’æµ·æ¹–
<div class="mapbox" id="id-5" style="width: 100%; height: 20rem;"></div>
èŒ¶å¡é•‡
<div class="mapbox" id="id-6" style="width: 100%; height: 20rem;"></div></p>
<h3 id="ç¬¬ä¸‰å¤©-719">ç¬¬ä¸‰å¤© 7/19</h3>
]]></description>
</item><item>
    <title>çœ¼é•œæ–°é¸Ÿçš„ç»éªŒè°ˆ</title>
    <link>http://imzifeng.cn/posts/glass/</link>
    <pubDate>Mon, 12 Jul 2021 21:21:52 &#43;0800</pubDate><author>
        <name>zifeng</name>
    </author><guid>http://imzifeng.cn/posts/glass/</guid>
    <description><![CDATA[<h3 id="å‰è¨€">å‰è¨€</h3>
<p>19å¹´4æœˆ19æ—¥ï¼Œé™ªä¼´æˆ‘å¤šå¹´çš„å˜è‰²çœ¼é•œç»ˆäºå…‰è£é€€å½¹äº†ï¼Œåœ¨é•œæ¡†çš„çºµå®¹ä¸‹ï¼Œå·¦çœ¼é•œç‰‡é€‰æ‹©ç»“æŸè‡ªå·±çš„ä½¿å‘½å¥”å‘äº†è‡ªç”±ã€‚</p>
<p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸‰å‰¯çœ¼é•œï¼Œå½“æ—¶å¿ƒè¡€æ¥æ½®é€‰æ‹©çš„å˜è‰²ç‰‡ï¼Œå˜è‰²ç‰‡è™½ç„¶ç”¨ç€èˆ’æœï¼Œä½†æ˜¯å› ä¸ºå¦‚ä¸‹åŸå› ä¸å¤ªæƒ³ç”¨ç¬¬äºŒæ¬¡ï¼š</p>
<ol>
<li>é•œç‰‡å˜è‰²å–å†³äºç´«å¤–çº¿å¼ºåº¦ï¼Œæ‰€ä»¥ï¼Œå¼€è½¦æ²¡ç”¨ï¼ˆæŒ¡é£ç»ç’ƒæœ‰è¿‡æ»¤ç´«å¤–çº¿ä½œç”¨ï¼‰ï¼Œä¸‹é›¨å¤©æˆ–è€…é˜´å¤©å´æœ‰å¯èƒ½å˜è‰²ï¼Œä½ èƒ½æƒ³åˆ°åœ¨ä¸€ä¸ªé˜´éƒçš„å‚æ™šçœ‹ä¸€ä¸ªæˆ´å¢¨é•œçš„äººæœ‰å¤šå‚»å¼å—ï¼Ÿ</li>
<li>å¢¨é•œè‡ªå¸¦ä¸€ä¸¢ä¸¢çš„è£…é€¼å±æ€§ï¼Œè™½ç„¶å¾ˆå¤šæ—¶å€™éƒ½æ˜¯ä¸ºäº†çœ¼ç›èˆ’æœï¼Œåˆ«äººè§‰å¾—è£…é€¼å°±è£…å§ï¼Œåæ­£æˆ´ä¸Šå¢¨é•œåˆ«äººè®¤ä¸å‡ºï¼ˆè¿˜å¯ä»¥é®æŒ¡è§†çº¿çœ‹å¯çˆ±çš„å°å§å§ï¼‰ï¼Œä½†æ˜¯ï¼Œå˜è‰²ç‰‡ä¸ä¸€æ ·ï¼Œå®ƒä¼šå˜è‰²ï¼Œä½†æ˜¯å´ä¸ä¼šåƒå¢¨é•œé‚£æ ·é»‘ï¼Œåˆ«äººè¿˜æ˜¯èƒ½çœ‹è§ä½ ï¼Œè®¤å‡ºä½ ï¼ˆè¿˜æŒ¡ä¸äº†è§†çº¿ï¼‰ã€‚æ‰€ä»¥ä½ æœ‰æ—¶ä¼šçœ‹åˆ°èµ°åœ¨è·¯ä¸Šåˆ«äººä¼šçœ‹ä½ ï¼Œæ¯•ç«Ÿå˜è‰²ç‰‡è¿˜ä¸æ˜¯ç‰¹åˆ«ä¸»æµã€‚</li>
<li>å˜è‰²ç‰‡æ¢å¤æ—¶é—´è¿˜æ˜¯æ¯”è¾ƒé•¿ï¼Œçªç„¶ä»é˜³å…‰ä¸‹è¿›å…¥å®¤å†…ä¼šå¾ˆä¸é€‚åº”ï¼Œç›¸å½“äºå®¤å†…æˆ´å¢¨é•œä½ è¿˜æ²¡æ³•å–ï¼Œè€Œä¸”å¦‚æœåœ¨çœ¼é•œè¿˜æ˜¯åŠé»‘çš„æƒ…å†µä¸‹å»è§é•¿è¾ˆæˆ–è€…è€å¸ˆæ„Ÿè§‰å¾ˆä¸ç¤¼è²Œ</li>
</ol>
<p>å˜è‰²ç‰‡å°±å½“æ˜¯ä¸ªç©å…·ï¼Œå¦‚æœæœ‰é•¿æ—¶é—´çš„å®¤å¤–å·¥ä½œéœ€æ±‚è¿˜æ˜¯å¯ä»¥å¼„ä¸€å‰¯ï¼Œæ¯”å¢¨é•œè¿˜æ˜¯æ–¹ä¾¿ä¸€ç‚¹ï¼Œè™½ç„¶æ²¡æœ‰å¢¨é•œå¸…ã€‚</p>
<p>é«˜åº¦è¿‘è§†æ‚£è€…æ²¡æœ‰å¤‡ç”¨é•œï¼Œç®€ç›´ç”Ÿæ´»éƒ½æ²¡åŠæ³•è‡ªç†ï¼Œè™½ç„¶æˆ‘è¿˜æœ‰ä¸€ä¸ªäº‰æ°”çš„å³çœ¼200åº¦èƒ½æ’‘ä¸€ä¸‹ï¼Œä¹‹å‰ä¸€ç›´è§‰å¾—çœ¼é•œæ˜¯ä¸ªæš´åˆ©è¡Œä¸šï¼Œä¸€å‰¯æ™®æ™®é€šé€šçš„æ¡†ä¸€å †åè¯å¿½æ‚ æ¥å°±æ•¢ä¹°ä¸€ä¸¤åƒï¼Œæ¯›åˆ©ç‡ç”šè‡³è¶…è¿‡95%ï¼Œä½†æ˜¯çœ‹äº†ä¸€ä¸ªâ€œæŒºç€æš´åˆ©å…‰ç¯æŒ£æ‰åœ¨æ¸©é¥±çº¿ä¸Šçš„çœ¼é•œåº—ä¸»â€å†™çš„å¸–å­ï¼Œå¯¹è¿™ä¸ªè¡Œä¸šæœ‰äº†ä¸ä¸€æ ·çš„çœ‹æ³•ï¼Œçœ¼é•œç¡®å®æ˜¯å•å“åˆ©ç‡é«˜ï¼Œä½†æ˜¯åº—é“ºåˆ©ç‡ä½ï¼Œä¸ºä»€ä¹ˆï¼Ÿå–çš„å°‘å•Šï¼Œçœ¼é•œåˆä¸åƒæ‰‹æœºï¼Œéš”ä¸€ä¸¤å¹´è¿˜æä¸ªæ›´æ–°æ¢ä»£ï¼Œå¦‚æœä¸æ˜¯å‡ºä»€ä¹ˆé—®é¢˜æˆ–è€…åº¦æ•°çŒ›æ¶¨ï¼Œä¸€èˆ¬äººæˆ´ä¸ªåå¹´å…«å¹´æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œå¾ˆå¤šåº—æ’‘æ­»ä¸¤ä¸‰å¤©å–ä¸€å‰¯ï¼Œæ°´ç”µæ°”åŠ æˆ¿ç§Ÿä¸€å‡ï¼Œç»´æŒæ¸©é¥±è¿˜æ˜¯å¾ˆè½»æ¾ï¼ŒçœŸä¸æ˜¯åˆ«äººæƒ³å‘ä½ é’±ï¼Œå®åœ¨æ˜¯è¿è¥æ¨¡å¼ä¸‹æ²¡åŠæ³•ã€‚</p>
<p>æœ‰äººä¸€å¬å¥½è€³ç†Ÿï¼Œæ°´ç”µæˆ¿ç§Ÿè¿™å¥½åŠï¼Œç½‘è´­å•Šï¼Œç½‘åº—ä¸å°±æ˜¯æ‘†è„±äº†è¿™äº›å›ºå®šæˆæœ¬å—ï¼Ÿå…¶å®å°è¯•çš„äººè¿˜çœŸä¸å°‘ï¼Œå›½å†…å‡ å®¶å¤§ç‰Œéƒ½æœ‰ç½‘ä¸Šå•†åŸï¼Œä½†æ˜¯çœ¼é•œä½œä¸ºä¸€ä¸ªå®šåˆ¶åŒ–ç¨‹åº¦æé«˜çš„äº§å“ï¼Œåœ¨ç½‘è´­ä¸­å¤„å¤„æ°´åœŸä¸æœã€‚éªŒå…‰é—®é¢˜&ndash;è¦å»åŒ»é™¢ï¼Œé€‰æ¡†é—®é¢˜&ndash;å¥½å§åˆ«äººå¯„å‡ å¹…æ‚¨æŒ‘ï¼ŒæŒ‘å¥½äº†è¿˜å¾—ç»™åˆ«äººé€€å›å»ï¼Œç„¶åéƒ½é€‰å¦¥äº†åˆ«äººå†å·¥å‚ç”Ÿäº§å®Œç»™æ‚¨å¯„è¿‡å»ï¼Œä¸€æ¥äºŒå»å¤§åŠä¸ªæœˆå°±æ²¡äº†ï¼Œæˆ‘è¿˜ä¸å¦‚ç›´æ¥å»è¡—ä¸Šæ‰¾å®¶çœ¼é•œåº—å‘¢ã€‚</p>
<p>è¿™æ¬¡é…é•œå’Œä»¥å‰ä¸ä¸€æ ·ï¼Œå¤§å­¦é‡Œç»ˆäºæœ‰å……è¶³çš„æ—¶é—´å»é…ä¸€å‰¯çœ¼é•œäº†ï¼Œä¸åƒä»¥å‰è€å¦ˆå¸¦ç€ï¼Œç«é€Ÿå®Œäº‹å„¿ã€‚åœ¨ç½‘ä¸ŠæŸ¥èµ„æ–™åšäº†å¾ˆå¤šåŠŸè¯¾ï¼Œç®—æ˜¯å°æœ‰å¿ƒå¾—ï¼Œåœ¨è¿™é‡Œåšä¸ªåˆ†äº«è®°å½•ã€‚</p>
<h3 id="å¿«æ—¶å°šå“ç‰Œ">â€œå¿«æ—¶å°šå“ç‰Œâ€ï¼Ÿ</h3>
<p>çœ¼é•œè¡Œä¸šå‘å±•åˆ°ç°åœ¨ï¼Œè¿˜æœ‰çªç ´çš„å¯èƒ½å—ï¼Ÿ</p>
<p>è¿˜çœŸæœ‰ï¼Œæ—¢ç„¶å®ä½“åº—é¢ä¸´æˆæœ¬é«˜é£é™©ç­‰å‹åŠ›ï¼Œè¿˜æ˜¯å¯ä»¥æ²¿ç”¨äº’è”ç½‘é‚£ä¸€å¥—ï¼Œå®šä½å¹´è½»å¸‚åœºï¼Œé‡è®¾è®¡ï¼Œæ‰“é€ ç½‘çº¢ä½“éªŒï¼Œèµ°é‡æ¥ä¿è¯åˆ©ç‡ã€‚æ‰€ä»¥ä¸€æ‰¹â€œå¿«æ—¶å°šâ€å“ç‰Œè¿…é€Ÿå…´èµ·ï¼Œä»¥&quot;å¿«ã€ç‹ ã€å‡†&quot;ä¸ºä¸»è¦ç‰¹å¾ï¼Œæ¢æˆç›´æ¥ä½“éªŒå°±æ˜¯åº—é“ºçš„è£…ä¿®æ—¶å°šæ°”æ¯æµ“åšã€è´­ç‰©æ°›å›´è‡ªç”±ã€æœåŠ¡è´´å¿ƒï¼›å…¶æ¬¡ï¼Œäº§å“æ—¶å°šæ½®æµåº¦è¾ƒé«˜ï¼Œæ›´æ–°é€Ÿåº¦å¿«ï¼ŒåŒæ—¶ä»·æ ¼äº²æ°‘ï¼Œä¸ä¼šåƒæ™®é€šçœ¼é•œåº—é‚£æ ·ä¸€ç›´æœ‰ä¸€ä¸ªåº—å‘˜è·Ÿç€ä½ ç¢ç¢å¿µï¼ˆç¤¾æå™©æ¢¦ï¼‰ï¼Œé•œæ¶ä¸ä¼šé”åœ¨ç»ç’ƒæŸœå­é‡Œè€Œæ˜¯æ‘†åœ¨è´§æ¶ä¸Šå¯ä»¥éšæ„è¯•æˆ´ï¼Œæœ‰éœ€è¦åº—å‘˜ä¹Ÿä¼šç»™ä½ ä¸€äº›å»ºè®®ï¼Œä½“éªŒå¥½äº†ä¸å°‘ã€‚ç›®å‰å›½å†…æ¯”è¾ƒç«çš„å¿«æ—¶å°šå“ç‰Œæœ‰JINS(ç›å§¿)ã€LOHOçœ¼é•œç”Ÿæ´»ã€æœ¨ä¹åã€ZOFF(ä½èŠ™)ã€Aojo(è‰¾é•œ)ã€EXEé•œè‡ªç”±ã€eGGã€URAKU(ä¹é¡¾)ã€Zeleã€LookOpticalç­‰ã€‚</p>
<p>åœ¨å°çº¢ä¹¦å’Œä»€ä¹ˆå€¼å¾—ä¹°ä¸Šï¼ŒJinså¯ä»¥è¯´æ˜¯ä¼—äººçš„å¿ƒå¤´å¥½ï¼Œå…·ä½“è´­ä¹°å¸–è‡ªå·±å»æœï¼Œä¸åœ¨ç´¯è¿°ã€‚å®šä½å¹´è½»å’Œé«˜æ€§ä»·æ¯”çš„æ ‡ç­¾æ·±å¾—æˆ‘å¿ƒï¼Œæ‰€ä»¥å°±é€‰å®ƒå®¶çš„çœ¼é•œäº†ï¼Œå…ˆæ˜¯æ‰“ç®—ç½‘è´­ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•è¯•æˆ´è®©æˆ‘è¿™ä¸ªè„¸å½¢ä¸å¥½æ’˜çš„äººçŸ¥éš¾è€Œé€€ã€‚ä¸€æœå‘ç°æˆéƒ½çš„åº—é¢è¿˜çœŸä¸å¤ªå°‘ï¼Œå¤§æ¦‚æœ‰ä¸ƒå…«å®¶ï¼Œé€‰äº†ä»å›¾ç‰‡ä¸Šçœ‹åº—é¢æœ€å¤§çš„ç¯çƒä¸­å¿ƒåº—ã€‚</p>
<p>ç¯çƒä¸­å¿ƒå·¨æ— éœ¸çš„ä½“ç§¯ç€å®è®©æˆ‘è¿™ä¸ªå¤„äºåŠå¤±æ˜çŠ¶æ€çš„äººæ‰¾äº†å¥½ä¸€é˜µï¼Œåˆ°äº†åº—é—¨å£å°±å‘ç°å’Œå¤–é¢é‚£äº›å¦–è‰³è´±è´§æœç„¶ä¸ä¸€æ ·ï¼Œå’Œå‘¨å›´çš„æ—¶è£…å¤§ç‰Œå®Œç¾èä¸ºä¸€ä½“ï¼Œæ¸©é¦¨çš„è£…ä¿®å’Œå¼€æ”¾çš„é•œæ¶è®©ä¸€äº›ä¸æ‰“ç®—é…é•œçš„äººéƒ½æœ‰è¿›å»é€›é€›çš„å†²åŠ¨ã€‚</p>
<p>æœ€ååœ¨åº—å‘˜å°å§å§çš„æ¨èä¸‹é€‰äº†ä¸€ä¸ª999çš„é’›æ¡†ï¼Œè€ƒè™‘åˆ°å·¦çœ¼500çš„åº¦æ•°,åŠ 300å…ƒä¸Šäº†1.67ï¼Œææ´»åŠ¨å†ä¼˜æƒ ä¸€ç™¾ï¼Œåˆ°æ‰‹ä»·1199.ç”±äºéœ€è¦å®šåˆ¶é•œç‰‡ï¼Œ5-7å¤©åæ‰èƒ½å–é•œæˆ–è€…é‚®å¯„ï¼Œå¼€ç®±å›¾å¾…è¡¥</p>
<p>ä¸‹é¢æ˜¯é‡ç‚¹ï¼Œåœ¨è¿‘å‡ å¹´ä¸€äº›åª’ä½“çš„åˆ»æ„å¼•å¯¼ä¸‹ï¼Œæ¶ˆè´¹è€…å’Œå•†å®¶ä¹‹é—´çš„ä¿¡æ¯ä¸å¯¹ç­‰è¢«åˆ»æ„æ”¾å¤§ï¼Œå¾ˆå¤šäººéƒ½è§‰å¾—â€œå•†å®¶çš„å˜´ï¼Œéª—äººçš„é¬¼â€ï¼Œå½“ç„¶ä¸€äº›æ— è‰¯å•†å®¶ä¹Ÿå¯¹é€ æˆè¿™æ ·çš„å±€é¢åŠŸä¸å¯æ²¡ï¼Œæˆ‘è¿˜æ˜¯ç›¸ä¿¡ä¸–ç•Œä¸Šè¿˜æ˜¯å¥½äººå¤šï¼Œæœ‰äº›å•†å®¶è¿˜æ˜¯ä¼šå¾ˆè´´å¿ƒåœ°å¸®ä½ é€‰æ‹©å•†å“çš„ï¼Œå¦‚æœä½ è¿˜æ˜¯è§‰å¾—ä¸å¤ªä¿é™©ï¼Œé‚£ä¹ˆæœ€å¥½çš„åŠæ³•å°±æ˜¯æ¶ˆé™¤é—®é¢˜çš„æ ¹æº&ndash;ä¿¡æ¯ä¸å¹³ç­‰ï¼Œå¦‚æœä½ èƒ½å¤Ÿåˆ†è¾¨å‡ºå•†å®¶å˜´é‡Œæ¯ä¸ªæ™¦æ¶©éš¾æ‡‚çš„è¯è¯­çš„æ„æ€ï¼Œé‚£å†æ²¡äººèƒ½å¤Ÿéª—åˆ°ä½ ã€‚</p>
<h3 id="156-160-167">1.56? 1.60? 1.67ï¼Ÿ</h3>
<p>çœ¼é•œæ˜¯é€šè¿‡æŠ˜å°„æ”¹å˜å…¥å°„å…‰çº¿ï¼Œä»è€Œä½¿å¤–ç•Œçš„å…‰çº¿èƒ½å¤Ÿåœ¨è§†ç½‘è†œä¸Šæ¸…æ™°æˆåƒï¼Œä»¥è¾¾åˆ°çŸ«æ­£è§†åŠ›çš„ç›®çš„ã€‚æ¯äººéœ€è¦çŸ«æ­£çš„ç¨‹åº¦ï¼Œæˆ–è€…è¯´è¿‘è§†ï¼ˆè¿œè§†ï¼‰çš„åº¦æ•°ä¸ä¸€æ ·ï¼Œé€šè¿‡æ”¹å˜é•œç‰‡çš„å½¢çŠ¶æˆ–è€…æŠ˜å°„ç‡å°±å¯ä»¥å®ç°ä¸åŒçš„çŸ«æ­£åº¦æ•°ã€‚è€Œå•†å®¶åœ¨é€‰æ‹©é•œç‰‡æ—¶æ‰€è¯´çš„1.56\1.67å°±æ˜¯æŒ‡çš„é•œç‰‡æŠ˜å°„ç‡ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒæŠ˜å°„ç‡è¶Šé«˜ï¼Œé•œç‰‡å°±è¶Šè–„ï¼Œéšä¹‹é‡é‡ä¸‹é™å’Œç¾è§‚åº¦ä¹Ÿä¼šæå‡ã€‚ä½†å¯¹äºä½åº¦æ•°çš„åŒå­¦æ¥è¯´ï¼Œä¸åŒæŠ˜å°„ç‡ä¹‹é—´çš„é•œç‰‡è–„åšå·®è·å¾®ä¹å…¶å¾®ï¼Œè€Œä»·æ ¼ä¹‹é—´çš„å·®è·å°±æ¯”è¾ƒå¤§äº†ã€‚é«˜æŠ˜å°„ç‡çš„ä¼˜åŠ¿åªæœ‰åœ¨é«˜å€é•œä¸­æ‰èƒ½ä½“ç°å‡ºæ¥ã€‚</p>
<p>1ã€100åº¦ä»¥ä¸‹çš„è¿‘è§†æˆ–å¹³å…‰ï¼Œæˆ–è€…100åº¦ä»¥ä¸‹çš„è¿œè§†ï¼Œå»ºè®®é€‰æ‹©1.50æŠ˜å°„ç‡çš„é•œç‰‡ï¼›</p>
<p>2ã€100~300åº¦çš„è¿‘è§†ï¼Œæˆ–è€…100~300åº¦ä»¥ä¸‹çš„è¿œè§†ï¼Œå»ºè®®é€‰æ‹©1.56æŠ˜å°„ç‡çš„é•œç‰‡ï¼›</p>
<p>3ã€300~600åº¦çš„è¿‘è§†ï¼Œæˆ–è€…300åº¦~600åº¦ä»¥ä¸‹çš„è¿œè§†ï¼Œå»ºè®®é€‰æ‹©1.60æŠ˜å°„ç‡çš„é•œç‰‡ï¼›</p>
<p>4ã€600~800åº¦çš„è¿‘è§†ï¼Œå»ºè®®é€‰æ‹©1.67æŠ˜å°„ç‡çš„é•œç‰‡ï¼›</p>
<p>5ã€800åº¦ä»¥ä¸Šçš„è¿‘è§†ï¼Œå»ºè®®é€‰æ‹©1.74æŠ˜å°„ç‡çš„é•œç‰‡ã€‚</p>
<h3 id="é˜¿è´æ•°">é˜¿è´æ•°ï¼Ÿ</h3>
<p>å¯èƒ½æœ‰çš„åŒå­¦ä¼šæƒ³ï¼Œæˆ‘æœ‰é’±ï¼Œä»»æ€§ï¼Œè™½ç„¶æˆ‘åº¦æ•°ä¸é«˜ï¼Œä½†æ˜¯æˆ‘å°±è¦é€‰æœ€è´µçš„1.74æŠ˜å°„ç‡ï¼Œé‚£å‡å°‘çš„é›¶ç‚¹å‡ å…‹é‡é‡å¯¹æœ¬ä»™å¥³å¾ˆé‡è¦ã€‚è¿™æ ·é€‰æ‹©å¹¶ä¸ç†æ™ºï¼Œè¿™å°±æ¶‰åŠåˆ°ä¸€ä¸ªå•†å®¶å¾€å¾€ä¸ä¼šå‘Šè¯‰ä½ çš„å‚æ•°&ndash;é˜¿è´æ•°ï¼ˆè‰²æ•£ç³»æ•°ï¼‰ã€‚</p>
<p>å…ˆæ¥å¤ä¹ ä¸€ä¸‹é«˜ä¸­ç‰©ç†&mdash;åŒç§ä»‹è´¨å¯¹ä¸åŒæ³¢é•¿çš„å…‰æœ‰ä¸åŒçš„æŠ˜å°„ç‡ã€‚é€šè¿‡è¿™ä¸ªåŸç†ï¼Œæˆ‘ä»¬å¯ä»¥é€ å‡ºä¸‰æ£±é•œï¼Œå°†ä¸åŒæ³¢é•¿çš„å…‰åˆ†å¼€ï¼Œè¡¡é‡è¿™ç§èƒ½åŠ›çš„æŒ‡æ ‡å°±æ˜¯é˜¿è´æ•°ï¼Œè‰²æ•£ç°è±¡åœ¨çœ¼é•œä¸­åŒæ ·å­˜åœ¨ï¼Œä¸€äº›é«˜åº¦è¿‘è§†çš„æœ‹å‹åœ¨é€šè¿‡çœ¼é•œè¾¹ç¼˜çœ‹ç‰©ä½“æ—¶æœ‰æ—¶ä¼šå‘ç°ç‰©ä½“è¾¹ç¼˜æœ‰è“è¾¹ï¼Œè¿™å°±æ˜¯å‘ç”Ÿäº†è‰²æ•£ã€‚è‰²æ•£ç¨‹åº¦è¶Šä½ï¼Œæˆåƒçš„æ•ˆæœè¶Šå¥½ï¼Œä¸åŒæŠ˜å°„ç‡çš„çœ¼é•œé˜¿è´æ•°å‚è€ƒå¦‚ä¸‹</p>
<p></p>
<p>æ€»ä½“æ¥è¯´ï¼Œ1.50æŠ˜å°„ç‡çš„é•œç‰‡çš„é˜¿è´æ•°å¯ä»¥è¾¾åˆ°58ï¼Œä½†æ˜¯ä¸€æ—¦ç”¨åˆ°1.74æŠ˜å°„ç‡è¶…è¶…è–„ä»¥ä¸Šç­‰çº§çš„é•œç‰‡æ—¶ï¼Œé˜¿è´æ•°ä¼šä¸‹é™åˆ°32~36ã€‚æ‰€ä»¥ï¼Œæœ‰å¥½å°±æœ‰åã€‚å¦‚æœä¸€å‘³è¿½æ±‚é•œç‰‡çš„è–„ï¼Œé‚£ä¹ˆå°±ä¼šç‰ºç‰²é•œç‰‡çš„é˜¿è´æ•°ï¼Œä¹Ÿå°±æ˜¯é™ä½äº†è§†è§‰å¯¹äºé¢œè‰²çš„çœŸå®æ„Ÿå—ï¼Œä»¥åŠèˆ’é€‚åº¦ã€‚</p>
]]></description>
</item></channel>
</rss>
